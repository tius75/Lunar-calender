<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalender Lunar Indonesia & Ramalan</title>
    <style>
        :root {
            --merah-tua: #8b0000;
            --merah-terang: #d32f2f;
            --emas: #d4af37;
            --krem-emas: #fcf4dd;
            --putih: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #fdf2f2;
            margin: 0;
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .app-container {
            width: 100%;
            max-width: 450px;
            background: var(--putih);
            border: 3px solid var(--emas);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        /* Bagian Atas / Header */
        .calendar-header {
            background: var(--merah-tua);
            color: var(--emas);
            padding: 20px;
            text-align: center;
        }

        .header-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .btn-nav {
            background: var(--emas);
            color: var(--merah-tua);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .btn-nav:hover { background: #e5c05b; }

        /* Grid Kalender */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            background: var(--krem-emas);
        }

        .label-hari {
            background: var(--merah-terang);
            color: var(--putih);
            padding: 12px 0;
            text-align: center;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .sel-tanggal {
            aspect-ratio: 1/1.2;
            border: 0.5px solid rgba(212, 175, 55, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: var(--putih);
            transition: 0.2s;
        }

        .sel-tanggal:hover {
            background: #fff0f0;
            z-index: 2;
            box-shadow: inset 0 0 5px var(--emas);
        }

        .sel-tanggal.hari-ini {
            background: var(--merah-terang) !important;
            color: var(--emas) !important;
        }

        .tgl-masehi {
            font-size: 1.1rem;
            font-weight: bold;
        }

        .tgl-lunar {
            font-size: 0.65rem;
            color: var(--merah-tua);
            margin-top: 2px;
            text-align: center;
        }

        /* Panel Ramalan */
        #panelRamalan {
            padding: 20px;
            border-top: 3px solid var(--emas);
            background: #fffcf5;
            display: none;
        }

        .kartu-ramalan {
            border-left: 4px solid var(--merah-tua);
            padding-left: 15px;
        }

        .badge-shio {
            background: var(--merah-tua);
            color: var(--emas);
            padding: 3px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 10px;
            display: inline-block;
        }

        .judul-info { font-weight: bold; color: #333; margin: 5px 0; }
        .teks-ramalan { font-size: 0.9rem; line-height: 1.5; color: #444; }
    </style>
</head>
<body>

    <div class="app-container">
        <div class="calendar-header">
            <h2 id="judulBulan">Januari 2026</h2>
            <div class="header-nav">
                <button class="btn-nav" id="btnPrev">Sebelumnya</button>
                <button class="btn-nav" id="btnNext">Berikutnya</button>
            </div>
        </div>

        <div class="calendar-grid" id="gridKalender">
            </div>

        <div id="panelRamalan">
            <div class="kartu-ramalan">
                <div id="displayShio" class="badge-shio">Shio</div>
                <div id="displayTglMasehi" class="judul-info"></div>
                <div id="displayTglLunar" style="font-size: 0.85rem; color: #b30000; margin-bottom: 8px;"></div>
                <p id="isiRamalan" class="teks-ramalan"></p>
            </div>
        </div>
    </div>

    <script type="module">
        import { Solar, Lunar } from 'https://esm.run/lunar-javascript';

        let tanggalAktif = new Date();

        const daftarBulan = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
        const daftarHari = ["Min", "Sen", "Sel", "Rab", "Kam", "Jum", "Sab"];

        const databaseRamalan = {
            "Tikus": "Hari yang baik untuk memulai rencana baru. Keberuntungan ada di pihak Anda.",
            "Kerbau": "Fokus pada pekerjaan rutin. Kesabaran akan membawa hasil yang stabil.",
            "Macan": "Waspadai pengeluaran mendadak. Beranilah mengambil keputusan kecil.",
            "Kelinci": "Harmoni keluarga adalah prioritas hari ini. Hindari debat kusir.",
            "Naga": "Energi Anda sedang prima. Peluang karir terlihat sangat cerah.",
            "Ular": "Gunakan intuisi Anda dalam menilai orang baru. Tetap waspada.",
            "Kuda": "Banyak interaksi sosial yang menguntungkan. Jangan menutup diri.",
            "Kambing": "Waktunya untuk istirahat dan memulihkan energi kreatif Anda.",
            "Monyet": "Solusi cerdas akan muncul untuk masalah yang sedang Anda hadapi.",
            "Ayam": "Kedisiplinan Anda hari ini akan dipuji oleh rekan kerja.",
            "Anjing": "Kesetiaan Anda membawa kebahagiaan bagi orang di sekitar Anda.",
            "Babi": "Kenyamanan rumah adalah tempat terbaik untuk hari ini. Nikmati kuliner."
        };

        function buatKalender(tgl) {
            const grid = document.getElementById('gridKalender');
            grid.innerHTML = '';
            
            const thn = tgl.getFullYear();
            const bln = tgl.getMonth();

            document.getElementById('judulBulan').innerText = `${daftarBulan[bln]} ${thn}`;

            // Tambah Label Hari
            daftarHari.forEach(h => {
                const div = document.createElement('div');
                div.className = 'label-hari';
                div.innerText = h;
                grid.appendChild(div);
            });

            const tglPertama = new Date(thn, bln, 1).getDay();
            const jmlHari = new Date(thn, bln + 1, 0).getDate();

            // Kotak kosong awal
            for (let i = 0; i < tglPertama; i++) {
                grid.appendChild(document.createElement('div'));
            }

            // Render Tanggal
            for (let d = 1; d <= jmlHari; d++) {
                const solar = Solar.fromYmd(thn, bln + 1, d);
                const lunar = solar.getLunar();
                
                const sel = document.createElement('div');
                sel.className = 'sel-tanggal';
                
                // Tandai Hari Ini
                if (new Date().toDateString() === new Date(thn, bln, d).toDateString()) {
                    sel.classList.add('hari-ini');
                }

                // Teks Lunar (Angka atau Nama Hari Besar)
                let teksLunar = lunar.getDayInChinese();
                if (teksLunar === '初一') {
                    teksLunar = lunar.getMonthInChinese() + ' Gwee'; // Awal bulan
                }

                sel.innerHTML = `
                    <span class="tgl-masehi">${d}</span>
                    <span class="tgl-lunar">${teksLunar}</span>
                `;

                sel.onclick = () => tampilkanRamalan(solar, lunar);
                grid.appendChild(sel);
            }
        }

        function tampilkanRamalan(solar, lunar) {
            const panel = document.getElementById('panelRamalan');
            panel.style.display = 'block';

            const shio = lunar.getYearShengXiao();
            const tglMasehi = `${solar.getDay()} ${daftarBulan[solar.getMonth()-1]} ${solar.getYear()}`;
            const tglLunar = `Imlek: ${lunar.getDayInChinese()} - Bulan ${lunar.getMonthInChinese()} - Tahun ${lunar.getYearInGanZhi()}`;

            document.getElementById('displayTglMasehi').innerText = tglMasehi;
            document.getElementById('displayTglLunar').innerText = tglLunar;
            document.getElementById('displayShio').innerText = `Shio ${shio} (${lunar.getYearNaYin()})`;
            document.getElementById('isiRamalan').innerText = databaseRamalan[shio] || "Semoga hari ini penuh berkah.";

            panel.scrollIntoView({ behavior: 'smooth' });
        }

        // Navigasi Tombol
        document.getElementById('btnPrev').onclick = () => {
            tanggalAktif.setMonth(tanggalAktif.getMonth() - 1);
            buatKalender(tanggalAktif);
            document.getElementById('panelRamalan').style.display = 'none';
        };

        document.getElementById('btnNext').onclick = () => {
            tanggalAktif.setMonth(tanggalAktif.getMonth() + 1);
            buatKalender(tanggalAktif);
            document.getElementById('panelRamalan').style.display = 'none';
        };

        // Jalankan Pertama Kali
        buatKalender(tanggalAktif);

    </script>
</body>
</html>
