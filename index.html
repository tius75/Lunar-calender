<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Kalender Lunar & Ramalan Shio Indonesia</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5e6d3 0%, #ecd9b4 100%);
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .app-container {
            max-width: 500px;
            width: 100%;
            background: white;
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(139, 0, 0, 0.3);
            overflow: hidden;
            border: 2px solid #d4af37;
        }

        /* Header */
        .header {
            background: linear-gradient(145deg, #8b0000 0%, #b22222 100%);
            color: #d4af37;
            padding: 15px 12px;
            text-align: center;
            border-bottom: 3px solid #c49a6c;
        }

        .header h1 {
            font-size: 1.5rem;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.3);
            margin-bottom: 4px;
        }

        .header p {
            font-size: 0.85rem;
        }

        /* Search */
        .search-box {
            background: #f0e0c0;
            padding: 12px;
            display: flex;
            gap: 8px;
            border-bottom: 2px solid #c49a6c;
        }

        .search-box input {
            flex: 1;
            padding: 10px 12px;
            border: 2px solid #c49a6c;
            border-radius: 50px;
            font-size: 0.9rem;
            min-width: 0;
        }

        .search-box button {
            background: #8b0000;
            color: #d4af37;
            border: none;
            padding: 0 15px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            border: 2px solid #d4af37;
            white-space: nowrap;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: #c49a6c;
        }

        .tab {
            flex: 1;
            padding: 12px 5px;
            background: none;
            border: none;
            font-size: 0.9rem;
            font-weight: bold;
            color: #4a2c1a;
            cursor: pointer;
            border-right: 1px solid #8b0000;
            white-space: nowrap;
        }

        .tab:last-child { border-right: none; }
        .tab.active {
            background: #8b0000;
            color: #d4af37;
        }

        /* Content */
        .content {
            padding: 15px;
            background: #fff5e6;
            display: block;
        }

        /* Calendar */
        .calendar-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 8px;
        }

        .nav-btn {
            background: #8b0000;
            color: #d4af37;
            border: none;
            padding: 8px 12px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 0.8rem;
            cursor: pointer;
            border: 2px solid #d4af37;
            white-space: nowrap;
        }

        #monthDisplay {
            font-size: 1.1rem;
            text-align: center;
            flex: 1;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            background: #c49a6c;
            padding: 2px;
            border-radius: 10px;
            width: 100%;
        }

        .day-label {
            background: #8b0000;
            color: white;
            padding: 8px 2px;
            text-align: center;
            font-weight: bold;
            font-size: 0.75rem;
            border-radius: 6px 6px 0 0;
            white-space: nowrap;
        }

        .date-cell {
            background: white;
            aspect-ratio: 1 / 1;
            padding: 2px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
            position: relative;
            min-height: 45px;
            width: 100%;
        }

        .date-cell:hover {
            background: #ffe0cc;
            border: 1px solid #8b0000;
        }

        .date-cell.today {
            background: #d4af37;
            color: #8b0000;
            font-weight: bold;
        }

        .date-cell.selected {
            border: 2px solid #8b0000;
            background: #ffd9b3;
        }

        .solar-date { 
            font-size: 1rem; 
            font-weight: bold; 
            line-height: 1.2;
        }
        
        .lunar-date { 
            font-size: 0.55rem; 
            color: #b22222; 
            text-align: center;
            line-height: 1.1;
            padding: 0 2px;
        }
        
        .special-badge { 
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 0.6rem;
        }

        /* Detail Panel */
        .detail-panel {
            margin-top: 20px;
            background: white;
            border-radius: 16px;
            padding: 15px;
            border: 2px solid #d4af37;
        }

        .shio-banner {
            background: linear-gradient(145deg, #8b0000 0%, #b22222 100%);
            color: #d4af37;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }

        .shio-title { 
            font-size: 1.3rem; 
            font-weight: bold; 
        }
        
        .element-badge {
            background: #d4af37;
            color: #8b0000;
            padding: 4px 15px;
            border-radius: 40px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .info-card {
            background: #fff5e6;
            padding: 10px;
            border-radius: 10px;
            border-left: 4px solid #8b0000;
        }

        .info-label { 
            font-size: 0.7rem; 
            color: #666; 
        }
        
        .info-value { 
            font-size: 0.9rem; 
            font-weight: bold; 
            color: #4a2c1a; 
            word-break: break-word;
        }

        .info-box {
            background: #fff5e6;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 12px;
            border: 1px dashed #8b0000;
            font-size: 0.85rem;
        }

        .box-title {
            color: #8b0000;
            font-weight: bold;
            font-size: 1rem;
            margin-bottom: 8px;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 4px;
        }

        /* Shio Cards */
        .shio-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        @media (min-width: 380px) {
            .shio-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .shio-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #c49a6c;
            transition: all 0.3s;
        }

        .card-header {
            background: linear-gradient(145deg, #8b0000 0%, #b22222 100%);
            color: #d4af37;
            padding: 10px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .card-body {
            padding: 10px;
            font-size: 0.8rem;
        }

        .relation {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            padding: 4px;
            background: #fff5e6;
            border-radius: 6px;
            font-size: 0.75rem;
        }

        .cocok { color: #2e7d32; font-weight: bold; }
        .chiong { color: #c62828; font-weight: bold; }

        .ramalan-detail {
            background: #fff5e6;
            padding: 8px;
            border-radius: 8px;
            margin-top: 8px;
            font-size: 0.75rem;
            line-height: 1.4;
        }

        /* Year Selector */
        .year-selector {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
        }

        .year-btn {
            background: #8b0000;
            color: #d4af37;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid #d4af37;
        }

        .year-display {
            font-size: 1.3rem;
            font-weight: bold;
            color: #8b0000;
            background: #d4af37;
            padding: 6px 20px;
            border-radius: 40px;
        }

        /* WA Button */
        .wa-button {
            background: #25D366;
            color: white;
            border: none;
            width: 100%;
            padding: 12px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 0.95rem;
            cursor: pointer;
            margin-top: 15px;
        }

        .footer {
            text-align: center;
            padding: 10px;
            background: #4a2c1a;
            color: #d4af37;
            font-size: 0.7rem;
        }

        /* Empty cell */
        .date-cell:empty {
            background: #f0e0c0;
        }
    </style>
</head>
<body>

<div class="app-container">
    <!-- Header -->
    <div class="header">
        <h1>üêâ KALENDER LUNAR üêâ</h1>
        <p>Tahun Kuda Api 2026 (Mulai 17 Feb 2026)</p>
    </div>

    <!-- Search -->
    <div class="search-box">
        <input type="date" id="searchDate" value="2026-02-17">
        <button id="searchBtn">Cari</button>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab active" onclick="showTab('calendar')">üìÖ Kalender</button>
        <button class="tab" onclick="showTab('ramalan')">üîÆ Ramalan</button>
        <button class="tab" onclick="showTab('shio')">üêæ 12 Shio</button>
    </div>

    <!-- Tab Calendar -->
    <div id="tab-calendar" class="content" style="display: block;">
        <div class="calendar-nav">
            <button class="nav-btn" onclick="prevMonth()">‚óÄ Prev</button>
            <h2 id="monthDisplay">Feb 2026</h2>
            <button class="nav-btn" onclick="nextMonth()">Next ‚ñ∂</button>
        </div>

        <div class="calendar-grid" id="calendarGrid"></div>

        <!-- Detail Panel -->
        <div class="detail-panel" id="detailPanel">
            <div class="shio-banner">
                <span class="shio-title" id="shioName">Shio Ular</span>
                <span class="element-badge" id="shioElement">Api</span>
            </div>

            <div class="info-grid">
                <div class="info-card">
                    <div class="info-label">Masehi</div>
                    <div class="info-value" id="masehiDate">17 Feb 2026</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Lunar</div>
                    <div class="info-value" id="lunarDate">1 - 1 - 2576</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Tahun Lunar</div>
                    <div class="info-value" id="lunarYear">Kuda Api</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Zodiak</div>
                    <div class="info-value" id="zodiakValue">Aquarius</div>
                </div>
            </div>

            <div class="info-box" id="sembahyangBox">
                <div class="box-title">üïØÔ∏è SEMBAHYANG</div>
                <div id="sembahyangText"></div>
            </div>

            <div class="info-box" id="jodohBox">
                <div class="box-title">üíû JODOH</div>
                <div id="jodohText"></div>
            </div>

            <div class="info-box" id="zodiakBox">
                <div class="box-title">üåü RAMALAN</div>
                <div id="zodiakText"></div>
            </div>

            <button class="wa-button" onclick="shareWhatsApp()">üì± Bagikan WA</button>
        </div>
    </div>

    <!-- Tab Ramalan Tahunan -->
    <div id="tab-ramalan" class="content" style="display: none;">
        <div class="year-selector">
            <button class="year-btn" onclick="changeYear(-1)">-</button>
            <span class="year-display" id="yearDisplay">2026</span>
            <button class="year-btn" onclick="changeYear(1)">+</button>
        </div>
        <div class="shio-grid" id="ramalanGrid"></div>
        <button class="wa-button" onclick="shareRamalanTahunan()">üì± Bagikan Ramalan</button>
    </div>

    <!-- Tab 12 Shio -->
    <div id="tab-shio" class="content" style="display: none;">
        <div class="shio-grid" id="shioGrid"></div>
        <button class="wa-button" onclick="shareSemuaShio()">üì± Bagikan 12 Shio</button>
    </div>

    <!-- Footer -->
    <div class="footer">
        ¬© 2026 Lunar Nusantara | Shio berganti saat Imlek
    </div>
</div>

<script>
    // ==================== DATA TANGGAL IMELEK (TAHUN BARU CHINA) ====================
    // Format: [tahun, bulan, tanggal] - Bulan dimulai dari 0 (Januari)
    const imlekDates = {
        2024: [2024, 1, 10],  // 10 Februari 2024 - Shio Naga
        2025: [2025, 0, 29],   // 29 Januari 2025 - Shio Ular
        2026: [2026, 1, 17],   // 17 Februari 2026 - Shio Kuda
        2027: [2027, 1, 6],    // 6 Februari 2027 - Shio Kambing
        2028: [2028, 0, 26],   // 26 Januari 2028 - Shio Monyet
        2029: [2029, 1, 13],   // 13 Februari 2029 - Shio Ayam
        2030: [2030, 2, 3],    // 3 Maret 2030 - Shio Anjing
        2031: [2031, 1, 21],   // 21 Februari 2031 - Shio Babi
        2032: [2032, 1, 11],   // 11 Februari 2032 - Shio Tikus
        2033: [2033, 0, 31],   // 31 Januari 2033 - Shio Kerbau
        2034: [2034, 1, 19],   // 19 Februari 2034 - Shio Macan
        2035: [2035, 1, 8],    // 8 Februari 2035 - Shio Kelinci
        2036: [2036, 0, 28],   // 28 Januari 2036 - Shio Naga
        2037: [2037, 1, 15],   // 15 Februari 2037 - Shio Ular
        2038: [2038, 1, 4],    // 4 Februari 2038 - Shio Kuda
        2039: [2039, 1, 24],   // 24 Februari 2039 - Shio Kambing
        2040: [2040, 1, 12],   // 12 Februari 2040 - Shio Monyet
    };

    // Urutan shio berdasarkan tahun Imlek
    const shioUrutan = ["Naga", "Ular", "Kuda", "Kambing", "Monyet", "Ayam", "Anjing", "Babi", "Tikus", "Kerbau", "Macan", "Kelinci"];

    // Data Sembahyang
    const hariSembahyang = {
        1: "‚ú® Ce It - Sembahyang Awal Bulan<br><small>Hari suci bersembahyang ke Thian & leluhur.</small>",
        2: "üìø Ji It - Doa keselamatan keluarga<br><small>Sembahyang ke Dewa Bumi.</small>",
        8: "üî• Puek It - Tian Gong (Syahdan)<br><small>Hari kelahiran Dewa Tertinggi.</small>",
        9: "üôè Kauw It - Tian Gong (Cia Gwe)<br><small>Perayaan Tahun Baru China.</small>",
        15: "üèÆ Cap Go - Sembahyang Purnama<br><small>Puncak perayaan Imlek.</small>",
        18: "üíù Tjap Lak - Hari bersedekah<br><small>Cocok berbuat kebajikan.</small>",
        23: "üî• Ji Tjap Sa - Dewa Dapur<br><small>Sembahyang kirim Dewa Dapur.</small>",
        24: "üßπ Ji Tjap Si - Bersih-bersih rumah<br><small>Persiapan Tahun Baru.</small>",
        29: "üôè Ji Kauw - Tutup tahun<br><small>Syukur akhir tahun.</small>",
        30: "üéâ Sa Tjap - Malam tahun baru<br><small>Penyambutan tahun baru.</small>"
    };

    // Data Ramalan Shio LENGKAP
    const ramalanShio = {
        "Tikus": {
            karakter: "Cerdas, adaptif, hemat, waspada",
            umum: "Tahun ini membawa stabilitas. Fokus pada konsolidasi dan memperkuat fondasi.",
            asmara: "Hubungan harmonis. Yang lajang berpeluang bertemu jodoh.",
            kesehatan: "Perhatikan sistem pencernaan. Hindari makanan berminyak.",
            karir: "Kesempatan promosi terbuka lebar. Tunjukkan inisiatif.",
            rejeki: "Keuangan stabil, ada rejeki tak terduga.",
            bisnis: "Waktu tepat ekspansi usaha, terutama bidang teknologi.",
            warna: ["Biru", "Hijau", "Ungu"],
            angka: [2, 5, 8],
            arah: "Timur",
            cocok: ["Naga", "Monyet"],
            chiong: ["Kuda", "Kelinci"]
        },
        "Kerbau": {
            karakter: "Ulet, pekerja keras, sabar, konsisten",
            umum: "Tahun ini penuh kerja keras yang membuahkan hasil memuaskan.",
            asmara: "Kesetiaan dihargai. Hubungan semakin kokoh.",
            kesehatan: "Jaga kesehatan tulang dan sendi.",
            karir: "Proyek besar sukses. Kerja tim mendukung.",
            rejeki: "Pendapatan meningkat, hindari investasi spekulatif.",
            bisnis: "Usaha kuliner dan properti menjanjikan.",
            warna: ["Kuning", "Coklat", "Oranye"],
            angka: [1, 4, 7],
            arah: "Barat Daya",
            cocok: ["Tikus", "Ayam"],
            chiong: ["Kambing", "Macan"]
        },
        "Macan": {
            karakter: "Berani, karismatik, impulsif, pelindung",
            umum: "Tahun penuh tantangan yang menguji keberanian.",
            asmara: "Romantisme meningkat, waspadai konflik.",
            kesehatan: "Rentan cedera fisik. Hati-hati berkendara.",
            karir: "Kepemimpinan diuji. Saatnya keputusan berani.",
            rejeki: "Ada peningkatan, tapi banyak pengeluaran.",
            bisnis: "Bisnis properti dan keamanan cerah.",
            warna: ["Merah", "Hitam", "Putih"],
            angka: [3, 6, 9],
            arah: "Selatan",
            cocok: ["Kuda", "Anjing"],
            chiong: ["Monyet", "Kerbau"]
        },
        "Kelinci": {
            karakter: "Lembut, diplomatis, artistik, penyayang",
            umum: "Tahun yang tenang dan damai. Waktu pengembangan diri.",
            asmara: "Keharmonisan keluarga meningkat.",
            kesehatan: "Jaga kesehatan mental. Luangkan waktu relaksasi.",
            karir: "Kreativitas dihargai. Proyek seni sukses.",
            rejeki: "Keuangan stabil, peningkatan di akhir tahun.",
            bisnis: "Usaha kreatif dan kafe menjanjikan.",
            warna: ["Hijau", "Pink", "Krem"],
            angka: [4, 7, 11],
            arah: "Tenggara",
            cocok: ["Kambing", "Babi"],
            chiong: ["Ayam", "Naga"]
        },
        "Naga": {
            karakter: "Karismatik, ambisius, beruntung, percaya diri",
            umum: "Tahun keberuntungan! Energi positif mendukung semua rencana.",
            asmara: "Romansa membara. Yang lajang bertemu jodoh.",
            kesehatan: "Sehat dan bugar sepanjang tahun.",
            karir: "Kesempatan emas naik jabatan.",
            rejeki: "Rejeki melimpah, tapi jaga pengeluaran.",
            bisnis: "Investasi properti dan saham menguntungkan.",
            warna: ["Emas", "Merah", "Ungu"],
            angka: [1, 5, 9],
            arah: "Utara",
            cocok: ["Tikus", "Monyet"],
            chiong: ["Anjing", "Kelinci"]
        },
        "Ular": {
            karakter: "Bijaksana, misterius, intuitif, elegan",
            umum: "Tahun introspeksi dan perencanaan matang.",
            asmara: "Hubungan perlu perhatian ekstra. Komunikasi kunci.",
            kesehatan: "Rentan migrain. Jaga pola tidur.",
            karir: "Kenaikan jabatan tertunda tapi pasti.",
            rejeki: "Keuangan terkendali. Ada bantuan tak terduga.",
            bisnis: "Bisnis konsultan dan pendidikan cocok.",
            warna: ["Hitam", "Merah", "Coklat"],
            angka: [2, 6, 10],
            arah: "Barat",
            cocok: ["Ayam", "Kerbau"],
            chiong: ["Babi", "Macan"]
        },
        "Kuda": {
            karakter: "Energik, mandiri, petualang, ceria",
            umum: "Tahun shio sendiri - penuh dinamika dan perubahan.",
            asmara: "Gairah meningkat. Yang lajang banyak pilihan.",
            kesehatan: "Jaga stamina. Jangan terlalu memforsir diri.",
            karir: "Mobilitas tinggi. Banyak perjalanan dinas.",
            rejeki: "Arus kas lancar, banyak pengeluaran.",
            bisnis: "Usaha transportasi dan travel cerah.",
            warna: ["Merah", "Kuning", "Biru"],
            angka: [3, 7, 12],
            arah: "Selatan",
            cocok: ["Macan", "Anjing"],
            chiong: ["Tikus", "Kerbau"]
        },
        "Kambing": {
            karakter: "Kreatif, penyayang, artistik, sensitif",
            umum: "Tahun baik untuk berkarya. Lingkungan mendukung.",
            asmara: "Kedekatan emosional meningkat.",
            kesehatan: "Jaga pola makan. Hindari stres.",
            karir: "Karya diakui publik. Ada kolaborasi.",
            rejeki: "Penghasilan dari karya meningkat.",
            bisnis: "Usaha seni, dekorasi, dan kafe menjanjikan.",
            warna: ["Hijau", "Pink", "Putih"],
            angka: [4, 8, 13],
            arah: "Tenggara",
            cocok: ["Kelinci", "Babi"],
            chiong: ["Kerbau", "Anjing"]
        },
        "Monyet": {
            karakter: "Cerdik, humoris, inovatif, lincah",
            umum: "Tahun penuh ide dan inovasi. Waktu memulai proyek baru.",
            asmara: "Pesona meningkat. Banyak yang tertarik.",
            kesehatan: "Sehat bugar, tapi rentan kecelakaan kecil.",
            karir: "Ide brilian dihargai. Bonus menanti.",
            rejeki: "Untung dari investasi. Jangan spekulatif.",
            bisnis: "Bisnis teknologi dan startup cerah.",
            warna: ["Emas", "Coklat", "Biru"],
            angka: [5, 9, 14],
            arah: "Utara",
            cocok: ["Tikus", "Naga"],
            chiong: ["Macan", "Ular"]
        },
        "Ayam": {
            karakter: "Teliti, percaya diri, pekerja keras, blak-blakan",
            umum: "Tahun penyelesaian dan detail. Saatnya merapikan.",
            asmara: "Kesetiaan diuji. Hindari sikap terlalu kritis.",
            kesehatan: "Jaga sistem pernapasan. Hindari polusi.",
            karir: "Kenaikan pangkat karena ketelitian.",
            rejeki: "Keuangan membaik. Ada bonus besar.",
            bisnis: "Bisnis jasa dan konsultasi cocok.",
            warna: ["Merah", "Emas", "Coklat"],
            angka: [6, 10, 17],
            arah: "Timur Laut",
            cocok: ["Kerbau", "Ular"],
            chiong: ["Kelinci", "Anjing"]
        },
        "Anjing": {
            karakter: "Setia, jujur, berani, protektif",
            umum: "Tahun penuh tanggung jawab. Banyak yang mengandalkan.",
            asmara: "Kesetiaan dihargai. Hubungan langgeng.",
            kesehatan: "Sehat, tapi rentan alergi.",
            karir: "Promosi karena integritas. Jabatan baru.",
            rejeki: "Stabil. Ada rejeki dari keluarga.",
            bisnis: "Usaha keamanan dan properti cocok.",
            warna: ["Hijau", "Merah", "Ungu"],
            angka: [3, 7, 11],
            arah: "Timur",
            cocok: ["Macan", "Kuda"],
            chiong: ["Naga", "Ayam"]
        },
        "Babi": {
            karakter: "Jujur, sederhana, beruntung, penyayang",
            umum: "Tahun keberuntungan materi. Banyak kemudahan.",
            asmara: "Harmonis. Yang single bertemu di tempat ibadah.",
            kesehatan: "Jaga berat badan. Hindari manis berlebih.",
            karir: "Kerja keras membuahkan hasil. Kenaikan gaji.",
            rejeki: "Berlimpah. Bisa membeli aset.",
            bisnis: "Bisnis kuliner dan pendidikan cocok.",
            warna: ["Kuning", "Coklat", "Hitam"],
            angka: [2, 5, 8],
            arah: "Barat Daya",
            cocok: ["Kelinci", "Kambing"],
            chiong: ["Ular", "Monyet"]
        }
    };

    // Nama hari lunar
    const lunarDayNames = [
        "", "Ce It", "Ji It", "Sa It", "Si It", "Go It", "Lak It", "Tjit It", 
        "Puek It", "Kauw It", "Tjap It", "Tjap Tji", "Tjap Sa", "Tjap Si", 
        "Tjap Go", "Tjap Lak", "Tjit It", "Puek It", "Kauw It", "Ji Tjap", 
        "Ji It", "Ji Tji", "Ji Sa", "Ji Si", "Ji Go", "Ji Lak", "Ji Tjit", 
        "Ji Puek", "Ji Kauw", "Sa Tjap"
    ];

    const bulanIndo = [
        "Jan", "Feb", "Mar", "Apr", "Mei", "Jun",
        "Jul", "Agu", "Sep", "Okt", "Nov", "Des"
    ];

    // ==================== FUNGSI UTAMA ====================

    /**
     * Mendapatkan shio berdasarkan tanggal (memperhitungkan Imlek)
     * @param {Date} date - Tanggal yang akan dicek
     * @returns {string} Nama shio
     */
    function getShioByDate(date) {
        const year = date.getFullYear();
        const month = date.getMonth();
        const day = date.getDate();
        
        // Cari tahun Imlek untuk tahun ini
        let imlekYear = year;
        let imlekDate = imlekDates[year];
        
        // Jika tanggal sebelum Imlek tahun ini, maka masih shio tahun lalu
        if (imlekDate) {
            const imlekMonth = imlekDate[1];
            const imlekDay = imlekDate[2];
            
            // Buat objek Date untuk Imlek
            const imlekDateObj = new Date(year, imlekMonth, imlekDay);
            
            // Jika tanggal sebelum Imlek, gunakan shio tahun lalu
            if (date < imlekDateObj) {
                imlekYear = year - 1;
            }
        } else {
            // Fallback jika data tidak ada (pake rumus sederhana)
            // Shio berganti sekitar bulan Feb, asumsikan setelah 4 Feb adalah tahun baru
            if (month === 0 || (month === 1 && day < 4)) {
                imlekYear = year - 1;
            }
        }
        
        // Hitung shio berdasarkan tahun Imlek
        // Tahun 2024 adalah Naga (index 0 dalam shioUrutan)
        const baseYear = 2024;
        const baseShioIndex = 0; // Naga
        
        const yearDiff = imlekYear - baseYear;
        const shioIndex = (baseShioIndex + yearDiff) % 12;
        
        return shioUrutan[shioIndex >= 0 ? shioIndex : shioIndex + 12];
    }

    /**
     * Mendapatkan elemen shio (sederhana - berdasarkan warna)
     */
    function getElemenByShio(shio) {
        return ramalanShio[shio]?.warna[0] || "Api";
    }

    // ==================== FUNGSI KALENDER ====================
    function renderCalendar() {
        const grid = document.getElementById('calendarGrid');
        const monthDisplay = document.getElementById('monthDisplay');
        
        if (!grid) return;
        
        grid.innerHTML = '';
        
        const year = currentDate.getFullYear();
        const month = currentDate.getMonth();
        
        monthDisplay.innerText = `${bulanIndo[month]} ${year}`;

        // Label hari
        const days = ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'];
        days.forEach(day => {
            grid.innerHTML += `<div class="day-label">${day}</div>`;
        });

        // Hari pertama bulan
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        // Sel kosong
        for (let i = 0; i < firstDay; i++) {
            grid.innerHTML += `<div class="date-cell"></div>`;
        }

        // Tanggal
        for (let d = 1; d <= daysInMonth; d++) {
            // Simulasi lunar day (sederhana)
            const lunarDay = ((d + 13) % 30) + 1;
            const lunarName = lunarDayNames[lunarDay] || "";
            
            const currentDateObj = new Date(year, month, d);
            const shioForDate = getShioByDate(currentDateObj);
            
            const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
            const isToday = new Date().toDateString() === currentDateObj.toDateString();
            const isSelected = selectedDate === dateStr;

            const cell = document.createElement('div');
            cell.className = `date-cell ${isToday ? 'today' : ''} ${isSelected ? 'selected' : ''}`;
            
            // Tambah info shio kecil di pojok untuk tanggal Imlek
            const isImlek = imlekDates[year] && imlekDates[year][1] === month && imlekDates[year][2] === d;
            
            cell.innerHTML = `
                <span class="solar-date">${d}</span>
                <span class="lunar-date">${lunarName}</span>
                ${lunarDay === 1 || lunarDay === 15 ? '<span class="special-badge">‚ú®</span>' : ''}
                ${isImlek ? '<span class="special-badge" style="left:2px; right:auto;">üêâ</span>' : ''}
            `;
            
            cell.onclick = () => selectDate(dateStr, d, lunarDay, year, month+1, currentDateObj);
            
            grid.appendChild(cell);
            
            // Set default selected
            if (d === 17 && month === 1 && year === 2026 && !selectedDate) {
                selectDate(dateStr, 17, lunarDay, year, month+1, currentDateObj);
                cell.classList.add('selected');
            }
        }
    }

    function selectDate(dateStr, day, lunarDay, year, month, dateObj) {
        selectedDate = dateStr;
        
        // Dapatkan shio berdasarkan tanggal (dengan aturan Imlek)
        const shio = getShioByDate(dateObj || new Date(year, month-1, day));
        
        // Update detail panel
        document.getElementById('shioName').innerText = `Shio ${shio}`;
        document.getElementById('shioElement').innerText = getElemenByShio(shio);
        document.getElementById('masehiDate').innerText = `${day} ${bulanIndo[month-1]} ${year}`;
        
        // Hitung tahun lunar (tambah 551 dari tahun Masehi, tapi disesuaikan dengan Imlek)
        let lunarYear = year + 550;
        const imlekThisYear = imlekDates[year];
        if (imlekThisYear) {
            const imlekDate = new Date(imlekThisYear[0], imlekThisYear[1], imlekThisYear[2]);
            if (dateObj && dateObj < imlekDate) {
                lunarYear = year + 549; // Masih tahun lunar sebelumnya
            }
        }
        
        document.getElementById('lunarDate').innerText = `${lunarDay} - ${Math.ceil(day/15)} - ${lunarYear}`;
        document.getElementById('lunarYear').innerText = `${shio} ${getElemenByShio(shio)}`;
        
        // Zodiak
        const zodiakList = ["Capricorn", "Aquarius", "Pisces", "Aries", "Taurus", "Gemini", "Cancer", "Leo", "Virgo", "Libra", "Scorpio", "Sagitarius"];
        const zodiak = zodiakList[month % 12];
        document.getElementById('zodiakValue').innerText = zodiak;
        
        // Sembahyang
        document.getElementById('sembahyangText').innerHTML = hariSembahyang[lunarDay] || "üìø Hari Biasa<br><small>Doa sesuai keyakinan.</small>";
        
        // Jodoh
        const data = ramalanShio[shio];
        document.getElementById('jodohText').innerHTML = `
            <div><span style="color:#2e7d32;">‚úÖ Cocok:</span> ${data?.cocok.join(', ') || '-'}</div>
            <div><span style="color:#c62828;">‚ùå Chiong:</span> ${data?.chiong.join(', ') || '-'}</div>
        `;
        
        // Ramalan Zodiak
        document.getElementById('zodiakText').innerHTML = `
            <strong>${zodiak}</strong>: ${getRamalanZodiak(zodiak)}<br>
            <small>üéØ Arah: ${data?.arah || "Timur"} | üé® Warna: ${data?.warna?.join('/') || "Merah"} | üî¢ Angka: ${data?.angka?.join(', ') || "1,5,8"}</small>
        `;
    }

    function getRamalanZodiak(zodiak) {
        const ramalan = {
            "Aquarius": "Kreativitas muncul, manfaatkan untuk solusi masalah.",
            "Pisces": "Intuisi kuat, percaya firasat. Ada kabar baik.",
            "Aries": "Energi melimpah, salurkan positif. Hindari konflik.",
            "Taurus": "Keuangan membaik, ada peluang investasi.",
            "Gemini": "Komunikasi lancar, cocok negosiasi.",
            "Cancer": "Keluarga prioritas. Luangkan waktu.",
            "Leo": "Karir bersinar, pengakuan atas kerja keras.",
            "Virgo": "Detail penting. Perencanaan membuahkan hasil.",
            "Libra": "Hubungan harmonis. Ada undangan.",
            "Scorpio": "Intuisi tajam, cocok ambil keputusan.",
            "Sagitarius": "Perjalanan menarik menanti.",
            "Capricorn": "Kesabaran hasil. Fokus tujuan."
        };
        return ramalan[zodiak] || "Hari baik introspeksi.";
    }

    // ==================== RAMALAN TAHUNAN ====================
    function getRamalanUntukTahun(tahun) {
        // Tentukan shio utama tahun tersebut (berdasarkan Imlek)
        const imlekDate = imlekDates[tahun];
        let shioUtama;
        
        if (imlekDate) {
            // Tahun Imlek ini untuk tahun tersebut
            const baseYear = 2024;
            const baseShioIndex = 0; // Naga
            const yearDiff = tahun - baseYear;
            shioUtama = shioUrutan[(baseShioIndex + yearDiff) % 12];
        } else {
            // Fallback
            const shioTahun = ["Naga", "Ular", "Kuda", "Kambing", "Monyet", "Ayam", "Anjing", "Babi", "Tikus", "Kerbau", "Macan", "Kelinci"];
            shioUtama = shioTahun[tahun % 12];
        }
        
        const ramalanTahunan = {};
        
        const shioList = Object.keys(ramalanShio);
        shioList.forEach(shio => {
            const data = ramalanShio[shio];
            
            // Modifikasi ramalan berdasarkan shio utama tahun ini
            let umumModif = data.umum;
            let asmaraModif = data.asmara;
            
            if (shio === shioUtama) {
                umumModif = `‚ú® TAHUN ANDA! ‚ú® ${data.umum} Keberuntungan berlipat ganda karena Anda menjadi shio utama tahun ini.`;
                asmaraModif = `Tahun spesial untuk asmara. ${data.asmara} Kesempatan bertemu jodoh semakin besar.`;
            } else if (data.cocok && data.cocok.includes(shioUtama)) {
                umumModif = `üåü TAHUN BAIK! üåü Bersahabat dengan shio utama (${shioUtama}). ${data.umum} Dukungan dari berbagai pihak.`;
            } else if (data.chiong && data.chiong.includes(shioUtama)) {
                umumModif = `‚ö†Ô∏è TAHUN CHIONG ‚ö†Ô∏è Kurang cocok dengan shio utama (${shioUtama}). ${data.umum} Harus lebih berhati-hati dalam bertindak.`;
            }
            
            ramalanTahunan[shio] = {
                ...data,
                umum: umumModif,
                asmara: asmaraModif,
                tahun: tahun,
                shioUtama: shioUtama
            };
        });
        
        return ramalanTahunan;
    }

    function renderRamalanTahunan() {
        const grid = document.getElementById('ramalanGrid');
        if (!grid) return;
        
        grid.innerHTML = '';
        
        // Ambil ramalan untuk tahun currentYear
        const ramalanTahunIni = getRamalanUntukTahun(currentYear);
        
        const shioList = Object.keys(ramalanTahunIni);
        
        shioList.forEach(shio => {
            const data = ramalanTahunIni[shio];
            const isShioUtama = shio === data.shioUtama;
            
            const card = document.createElement('div');
            card.className = 'shio-card';
            card.innerHTML = `
                <div class="card-header">${shio} ${isShioUtama ? 'üëë' : ''}</div>
                <div class="card-body">
                    <div class="relation">
                        <span>‚úÖ Cocok:</span>
                        <span class="cocok">${data.cocok.join(', ')}</span>
                    </div>
                    <div class="relation">
                        <span>‚ùå Chiong:</span>
                        <span class="chiong">${data.chiong.join(', ')}</span>
                    </div>
                    <div class="ramalan-detail">
                        <strong>‚ú® Umum:</strong> ${data.umum}<br>
                        <strong>üíû Asmara:</strong> ${data.asmara}<br>
                        <strong>üí∞ Rejeki:</strong> ${data.rejeki}<br>
                        <strong>üè¢ Karir:</strong> ${data.karir}<br>
                        <strong>üí™ Kesehatan:</strong> ${data.kesehatan}
                    </div>
                </div>
            `;
            grid.appendChild(card);
        });
        
        // Update year display
        document.getElementById('yearDisplay').innerText = currentYear;
        
        // Update header
        const shioUtamaTahun = ramalanTahunIni[Object.keys(ramalanTahunIni)[0]]?.shioUtama;
        document.querySelector('.header p').innerHTML = `Tahun ${shioUtamaTahun} (Mulai ${imlekDates[currentYear]?.[2] || '?'} ${bulanIndo[imlekDates[currentYear]?.[1] || 1]} ${currentYear})`;
    }

    // ==================== RENDER 12 SHIO ====================
    function render12Shio() {
        const grid = document.getElementById('shioGrid');
        if (!grid) return;
        
        grid.innerHTML = '';
        
        const shioList = Object.keys(ramalanShio);
        
        shioList.forEach(shio => {
            const data = ramalanShio[shio];
            const card = document.createElement('div');
            card.className = 'shio-card';
            card.innerHTML = `
                <div class="card-header">üêæ ${shio}</div>
                <div class="card-body">
                    <p><strong>Karakter:</strong> ${data.karakter}</p>
                    <div class="relation">
                        <span>ü§ù Sahabat:</span>
                        <span class="cocok">${data.cocok.join(', ')}</span>
                    </div>
                    <div class="relation">
                        <span>‚öîÔ∏è Lawan:</span>
                        <span class="chiong">${data.chiong.join(', ')}</span>
                    </div>
                    <p><strong>Warna:</strong> ${data.warna.join(', ')}</p>
                    <p><strong>Angka:</strong> ${data.angka.join(', ')}</p>
                    <p><strong>Arah:</strong> ${data.arah}</p>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    // ==================== NAVIGASI ====================
    let currentDate = new Date(2026, 1, 17);
    let selectedDate = null;
    let currentYear = 2026;

    function prevMonth() {
        currentDate.setMonth(currentDate.getMonth() - 1);
        renderCalendar();
    }

    function nextMonth() {
        currentDate.setMonth(currentDate.getMonth() + 1);
        renderCalendar();
    }

    function changeYear(delta) {
        currentYear += delta;
        renderRamalanTahunan();
    }

    function showTab(tabName) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.content').forEach(c => c.style.display = 'none');
        
        if (tabName === 'calendar') {
            document.querySelectorAll('.tab')[0].classList.add('active');
            document.getElementById('tab-calendar').style.display = 'block';
            renderCalendar();
        } else if (tabName === 'ramalan') {
            document.querySelectorAll('.tab')[1].classList.add('active');
            document.getElementById('tab-ramalan').style.display = 'block';
            renderRamalanTahunan();
        } else if (tabName === 'shio') {
            document.querySelectorAll('.tab')[2].classList.add('active');
            document.getElementById('tab-shio').style.display = 'block';
            render12Shio();
        }
    }

    // ==================== SEARCH ====================
    document.getElementById('searchBtn')?.addEventListener('click', function() {
        const searchVal = document.getElementById('searchDate').value;
        if (searchVal) {
            const [year, month, day] = searchVal.split('-').map(Number);
            currentDate = new Date(year, month-1, day);
            renderCalendar();
            selectDate(searchVal, day, (day % 30) + 1, year, month, new Date(year, month-1, day));
        }
    });

    // ==================== SHARE ====================
    function shareWhatsApp() {
        const shio = document.getElementById('shioName').innerText;
        const masehi = document.getElementById('masehiDate').innerText;
        const lunar = document.getElementById('lunarDate').innerText;
        const pesan = `üîÆ RAMALAN LUNAR\nüìÖ ${masehi}\nüåô ${lunar}\n‚ú® ${shio}\nüíû Jodoh: ${document.getElementById('jodohText').innerText.replace(/<[^>]*>/g, ' ')}`;
        window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(pesan)}`);
    }

    function shareRamalanTahunan() {
        const ramalanTahunIni = getRamalanUntukTahun(currentYear);
        const shioUtama = ramalanTahunIni[Object.keys(ramalanTahunIni)[0]]?.shioUtama;
        
        let pesan = `üîÆ RAMALAN TAHUN ${currentYear} - TAHUN ${shioUtama} üîÆ\n\n`;
        const shioList = Object.keys(ramalanTahunIni).slice(0, 6);
        
        shioList.forEach(shio => {
            pesan += `${shio}: ${ramalanTahunIni[shio].umum.substring(0, 50)}...\n`;
        });
        pesan += `\n...dan 6 shio lainnya. Cek aplikasi!`;
        window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(pesan)}`);
    }

    function shareSemuaShio() {
        let pesan = "üêæ 12 SHIO üêæ\n\n";
        const shioList = Object.keys(ramalanShio).slice(0, 6);
        shioList.forEach(shio => {
            pesan += `${shio}: ${ramalanShio[shio].karakter}\n`;
        });
        window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(pesan)}`);
    }

    // ==================== INIT ====================
    window.onload = function() {
        renderCalendar();
        renderRamalanTahunan();
        render12Shio();
    };
</script>

</body>
</html>
